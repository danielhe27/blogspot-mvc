<section class="section">
    <div class="container">
        <h1 class="title">Dashboard</h1>
    </div>
</section>


<section class="section">
    <div class="container">
       {{#each posts}}
<div class="box post" data-post-id="{{id}}">
    <h2 class="title is-4">{{title}}</h2>
    <p>{{content}}</p>
    <p class="subtitle is-6">Created by: {{user.username}}</p>
<form action="/api/comments/{{id}}" method="POST" class="comment-form" style="display: none;">
                <div class="field">
                    <div class="control">
                        <textarea class="textarea" name="comment_text" placeholder="Add a comment"></textarea>
                    </div>
                </div>
            </form>
            <!-- Add Comment Button -->
            <button class="button add-comment-btn" style="background-color: #4CAF50; color: white;">Add Comment</button>

    <button type="button" class="button is-info update-btn" data-post-id="{{id}}">Update </button>
    <button type="button" class="button is-danger delete-btn" data-post-id="{{id}}">Delete</button>
    <div class="comments-section">
                <h3 class="subtitle is-5">Comments</h3>
                {{#each comments}}
                <div class="box comment">
                    <p>{{comment_text}}</p>
                    <p>Posted by: {{user.username}}</p>
                </div>
                {{/each}}
            </div>

    <div class="update-form" id="update-post-form-{{id}}" style="display: none;">
        <form id="update-post-form-content-{{id}}">
            <div class="field">
                <label class="label" for="updatePostTitle">Title</label>
                <div class="control">
                    <input class="input" type="text" id="updatePostTitle-{{id}}" name="title" value="{{title}}" placeholder="Enter post title" required>
                </div>
            </div>
            <div class="field">
                <label class="label" for="updatePostContent">Content</label>
                <div class="control">
                    <textarea class="textarea" id="updatePostContent-{{id}}" name="content" placeholder="Enter post content" required>{{content}}</textarea>
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <button type="submit" class="button is-link update-submit-btn" data-post-id="{{id}}">Update Post</button>
                </div>
            </div>
        </form>
    </div>
</div>
{{/each}}
    </div>
</section>

<!-- JavaScript for removing posts, adding comments, and updating posts -->
<script src="/js/remove-post.js"></script>
<script src="/js/add-comment.js"></script>
<script src="/js/update-post.js"></script>